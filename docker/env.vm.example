# VM Ubuntu - adaptation à un montage existant
#
# Hypothèse VM (comme dans votre exemple) :
# - le partage SMB "services/tracabilite" est déjà monté sur la VM en local ici :
#     /mnt/partage_fsop
#
# Objectif Docker :
# - exposer ce chemin dans le conteneur à l'emplacement attendu par l'appli :
#     /mnt/services/Tracabilite
# - et configurer TRACEABILITY_DIR en conséquence

# Host -> container bind mount
#
# Option A (actuel) : montage direct sur la traçabilité uniquement
#   SERVICES_HOST_PATH=/mnt/partage_fsop
#   SERVICES_CONTAINER_PATH=/mnt/services/Tracabilite
#
# Option B (recommandé pour FSOP) : monter la racine "services" (pour avoir aussi Qualite/Formulaires)
#   - host: /mnt/partage_services  => contient Tracabilite + Qualite + ...
#   - container: /mnt/services
#
# Exemple de montage côté VM (à adapter à votre environnement SMB) :
#   sudo mkdir -p /mnt/partage_services
#   sudo mount -t cifs "//192.168.1.9/Partage Reseau" /mnt/partage_services \
#     -o username=fsop.service,vers=3.1.1,iocharset=utf8,prefixpath=services
#
SERVICES_HOST_PATH=/mnt/partage_services
SERVICES_CONTAINER_PATH=/mnt/services

# If your CIFS mount appears root-owned / permission-blocking for the container user,
# you can run the backend as root to bypass local POSIX permission checks.
# Note: this does NOT bypass SMB/NTFS permissions on the server.
BACKEND_USER=0:0

# FSOP traceability root (inside container)
TRACEABILITY_DIR=/mnt/services/Tracabilite

# Database (SQL Server)
# IMPORTANT: "SERVEURERP" doit être résolvable depuis le conteneur. Sur VM, mettez plutôt une IP ou un FQDN.
# Exemple:
# DB_SERVER=192.168.1.10
DB_SERVER=SERVEURERP
DB_DATABASE=SEDI_ERP
DB_USER=QUALITE
DB_PASSWORD=QUALITE
DB_ENCRYPT=false
DB_TRUST_CERT=true

# FSOP depth (optional)
FSOP_SEARCH_DEPTH=3

# Templates (OBLIGATOIRE pour /api/fsop/template/:Fxxx/structure et pour générer un FSOP si le template n'est pas dans la traçabilité)
# Si vous utilisez l'option B ci-dessus (montage "services" complet), ces chemins devraient fonctionner :
FSOP_TEMPLATES_DIR=/mnt/services/Qualite/4_Public/A disposition/DOSSIER SMI/Formulaires
FSOP_TEMPLATES_XLSX_PATH=/mnt/services/Qualite/4_Public/A disposition/DOSSIER SMI/Formulaires/Liste des formulaires.xlsx

