# VM Ubuntu - adaptation à un montage existant
#
# Hypothèse VM (comme dans votre exemple) :
# - le partage SMB "services/tracabilite" est déjà monté sur la VM en local ici :
#     /mnt/partage_fsop
#
# Objectif Docker :
# - exposer ce chemin dans le conteneur à l'emplacement attendu par l'appli :
#     /mnt/services/Tracabilite
# - et configurer TRACEABILITY_DIR en conséquence

# Host -> container bind mounts
#
# Objectif : permettre d'avoir la traçabilité ET les templates même si ce sont 2 montages différents.
#
# 1) Traçabilité (FSOP runtime)
# - Vous avez déjà ce montage fonctionnel :
#     //192.168.1.9/Partage Reseau/services/tracabilite  -> /mnt/partage_fsop
SERVICES_HOST_PATH=/mnt/partage_fsop
SERVICES_CONTAINER_PATH=/mnt/services/Tracabilite
# TRACEABILITY_DIR doit rester cohérent avec SERVICES_CONTAINER_PATH
TRACEABILITY_DIR=/mnt/services/Tracabilite
#
# 2) Templates (Qualite/Formulaires)
# - Monter la racine "Partage Reseau" (ou le sous-dossier "Services") pour accéder à Qualite
#   Exemple (si "Qualite" est sous le dossier "Services") :
#     sudo mkdir -p /mnt/partage_services
#     sudo mount -t cifs "//192.168.1.9/Partage Reseau" /mnt/partage_services \
#       -o username=fsop.service,vers=3.1.1,iocharset=utf8,prefixpath=Services
#
TEMPLATES_HOST_PATH=/mnt/partage_services/Services
TEMPLATES_CONTAINER_PATH=/mnt/templates

# If your CIFS mount appears root-owned / permission-blocking for the container user,
# you can run the backend as root to bypass local POSIX permission checks.
# Note: this does NOT bypass SMB/NTFS permissions on the server.
BACKEND_USER=0:0

# FSOP traceability root is set above (TRACEABILITY_DIR)

# Database (SQL Server)
# IMPORTANT: "SERVEURERP" doit être résolvable depuis le conteneur. Sur VM, mettez plutôt une IP ou un FQDN.
# Exemple:
# DB_SERVER=192.168.1.10
DB_SERVER=SERVEURERP
DB_DATABASE=SEDI_ERP
DB_USER=QUALITE
DB_PASSWORD=QUALITE
DB_ENCRYPT=false
DB_TRUST_CERT=true

# FSOP depth (optional)
FSOP_SEARCH_DEPTH=3

# Templates (OBLIGATOIRE pour /api/fsop/template/:Fxxx/structure et pour générer un FSOP si le template n'est pas dans la traçabilité)
# IMPORTANT: adapter selon l'emplacement réel de "Qualite" dans votre partage.
# Cas courant si Qualite est sous le dossier "Services" :
FSOP_TEMPLATES_DIR=/mnt/templates/Qualite/4_Public/A disposition/DOSSIER SMI/Formulaires
FSOP_TEMPLATES_XLSX_PATH=/mnt/templates/Qualite/4_Public/A disposition/DOSSIER SMI/Formulaires/Liste des formulaires.xlsx

